Домашнее задание
Работа с уровнями изоляции транзакции в PostgreSQL

1)
(текущий уровень read committed)
в первой сессии добавить новую запись insert into persons(first_name, second_name) values('sergey', 'sergeev');
сделать select * from persons во второй сессии
видите ли вы новую запись и если да то почему? - НЕТ
завершить первую транзакцию - commit;
сделать select * from persons во второй сессии
видите ли вы новую запись и если да то почему?
завершите транзакцию во второй сессии

- ДА, потому что уровень read committed защищает от чтения незафиксированных данных. Значит до коммита Т1 изменения не будут видны для Т2.


2)
начать новые но уже repeatable read транзации - set transaction isolation level repeatable read;
(текущий уровень repeatable read)
в первой сессии добавить новую запись insert into persons(first_name, second_name) values('sveta', 'svetova');
сделать select * from persons во второй сессии
видите ли вы новую запись и если да то почему? - НЕТ
завершить первую транзакцию - commit;

сделать select * from persons во второй сессии
видите ли вы новую запись и если да то почему? - НЕТ
завершить вторую транзакцию
сделать select * from persons во второй сессии
видите ли вы новую запись и если да то почему?

 - ДА. На уровне repeatable read в PG недопускается "не повторяющееся чтение" и "фантомное чтение".
 Значит изменение строк и их количества в Т1 не будет видно в Т2.
